import os
import json
import re

# Dán dữ liệu thô vào đây (giữa 3 dấu nháy kép)
raw_data = """
0	HNI	HNI, 70400, 70405
1	BGG	BGG, 46840, 954, 121860, 139340,133099
2	STG	STG,65520,80520
3	DTP	DTP, 41260, 77410, 62240, 86123
4	QNI	QNI, 8142, 5242, 996, 1059, 1122, 11302, 9342, 9702, 10242, 10402, 10582, 8302, 7282, 5926, 5522, 5682, 8982, 8782, 9901, 10762, 10882, 10883, 11824, 11822
5	BLU	BLU, 72302, 64960, 60400
6	HTH	HTH, 26060, 26320, 33560, 35020, 37820, 37280, 39640, 39642, 49600, 54580, 68500, 70540, 72795, 76150, 76781, 77683, 78988, 80083, 46580, 75490, 75987, 76630, 76660, 76780, 77998, 77999, 78673, 78853, 79153, 79978, 80173, 80175, 81268, 81343, 81448
7	KHA	KHA, 919, 26780, 36940, 43620, 1108, 1045, 10584, 44340, 982
8	NTN	NTN, 30160, 37600, 53210, 37980, 38820, 38860, 38840, 38842, 41164, 41162, 41140, 41160, 43263, 61180, 43261, 43300
9	DNI	DNI , 120252
10	BTN	23565, BTN, 78050
11	LAN	1111, 20200, 922, 1048, 1174, 27801, 29040, 30180, 40480, 45640, 40461, 50020, 123640, 126000,122681,43281, 126260, 126262, 115524, LAN, 126020, 126920
12	QTI	QTI,30360, 45001,45002,45003,45004,45005,45006,45007,45008,45009,45010,45011,45105,45115,45600,45093,45101, BXCA, DKR, HLA, HHA, HHO,TPG,TPG2, DKVL,DHA, 40272
13	NAN	NAN, 40003, 40036, 40014, 40037
14	HBH	HBH, 17010,17011,17012,17007, 17006
15	PYN	PYN,993,930,42346,44320,49760,54710,48600,53053,51111,34180,54730,50680,50240,52965,45980
16	NDH	NDH;36MWY; 36079;36057;36022;36035;ndh;36ATH
17	LSN	LSN,987
18	QBH	QBH;DKQN;BVHN;44171;44006;44416
20	HYN	HYN, 72760, 87178, 79639, 84911, 88123, 84900,57520,98706, 90861, 79500,90862, 90421, 87187, 92862, 90863, 88120,55900, 76222, 111383
21	LCI	LCI,923,131616,33215,39540,55200,139440,54900,30860
22	VPC	VPC, 1133, 26180, 31280, 944, 32280, 24750, 40900, 27040, 28880, 33777, 1007, 32760,32480, 30980, 34470, 35454, 30300, 35099, 34345, 26002, 26004, 26005, 26006, 26010,PTO, 37460, 26440, 141520, 42320, 26440, 34350
23	AGG	AGG, 51580, 120250, 46560, 117563, 56020, 49920, 53900, 118180, 118989, 121720, 119120, 119119, 124260, 56040
24	BPC	BPC
25	BDG	61140,60080,32620,56400,55666,45960,42060,BDG,62080,62082
26	HCM	HCM, BVNT, 902, BVDKBD, 965, 101321, 10284, NTI
27	TBH	TBH,1086,960,1149,24560,30252,40782,32660,41560,55001,8984
28	BNH	100181,102641,27001, BNH
29	TNN	TNN,939,78135,42680,48820,48822,18707,GLI,8984,PYN
30	HPG	HPG,98599,112907
31	SLA	SLA, 63960,68222,69800,72120,68788, 70480, 70482, 72300, 67510,69300
32	TNH	TNH,64420
33	BKN	BKN, 92005, 47860, 103201, 106024, 106027,106029
34	HDG	HDG,91361,72800,74444,65680,34380,60380,62461,70240,44260,74050,74047,68360,52740,80800,97410,92001,67900,73555,81420,71725,67900,103590
35	LDG	LDG,1022,32764,54500,125140,125240,117980,57240,50780,90520,96520,52020,53600,54500,55960
36	GLI	GLI, 64001, 64246, 64282, 64022, 64010, 64015, 64274, 64035, 64286, 64002,8984
37	DLK	DLK
38	YBI	YBI, 37100
39	DBN	DBN,44280,46180,63560,63380,92004
40	BTE	BTE, 83301, 83012
41	HUE	HUE,42240,54040,56300,58820,60140,103124,63180,65660,68780,68700,68720,71380,75225,80508,80500,80510,79660,68740,95721,100746,46009
42	CTO	CTO,77166,4583,11843
43	HNM	HNM,915
44	HNI	HNI, 01077, 01255, 01041, 01009, 27179, 01Y63, 01245, 01025, 30351
45	NBH	NBH, 106601, 58660, 72978, 76250, 83525
46	VTU	VTU, 42480, 46240, 46040, 43460
47	CBG	CBG, 30900, 29050
"""

result = []
lines = raw_data.strip().splitlines()
for line in lines:
    parts = re.split(r'\t+', line.strip())
    stt = int(parts[0]) if parts[0].isdigit() else None
    ma_tinh = parts[1].strip() if len(parts) > 1 else ""
    if len(parts) > 2:
        rest = parts[2].strip().strip('"')
        duoi_file = [item.strip() for item in re.split(r'[;,]', rest) if item.strip()]
    else:
        duoi_file = []
    result.append({
        "stt": stt,
        "ma_tinh": ma_tinh,
        "duoi_file": duoi_file
    })

# Lấy đường dẫn thư mục chứa file .py
current_dir = os.path.dirname(os.path.abspath(__file__))
output_path = os.path.join(current_dir, "ProvinceRules.json")

# Ghi file JSON
with open(output_path, "w", encoding="utf-8") as f:
    json.dump(result, f, indent=2, ensure_ascii=False)

print(f"✅ Đã tạo xong file ProvinceRules.json tại: {output_path}")